{"version":3,"sources":["chia/view/fps.cljs"],"mappings":";;;;;AAKA,AAAA,AAAA;AAAA;AAAA,AAAAA,AAAA,AAAA;AAEA,AAAA,AAAAC,AAAAC,AAAAC,AAAAC;AAAA;AAAA,AAAA,AAAmBC,AAAWC;;AAC9B,AAAA,AAAAL,AAAAC,AAAAC,AAAAI;AAAA;AAAA,AAAA,AAAA,AAAmBC;;AACnB,AAAA,AAAAP,AAAAC,AAAAC,AAAAM;AAAA;AAAA,AAAA,AAAA,AAASC;;AACT,AAAA,AAAAT,AAAAC,AAAAC,AAAAQ;AAAA;AAAA,AAAA,AAAA,AAASC;;AAET,AAAA,AAAAX,AAAAC,AAAAC,AAAAU;AAAA;AAAA,AAAA,AAASC,AACA,AAACC,AAAQ;AAAA,AACM,AAAAC,AAAOK,AACP;AADAJ,AAAA;AAAA,AAAA,AAAA,AAAAC,AAAAF;AAAA,AAAA,AAAA,AAAA,AAAAE,AAAA,AAAA,AAAAC,AAAAF,AAAAC;;AAAA,AAAAF,AAAAC;;AAAAG;;AACc,AAAAE,AAAM,AAAA,AAACC;AAAP,AAAA,AAAAD,AAAA,AAAA;;AAAA,AAAAA,AAAA,AAAA;;AAAAA;;;;AAItC,AAAA,AAAME;AAAN,AACE,AAAAC,AACE,AAAAG,AAAA;AAAAC,AAAA;AAAAC,AAAkC,AAAK,AAACE,AAActB;AAAtD,AAAA,AAAAkB,AAAAC,AAAAC,AAACC;;AADHL,AAEE,AAACZ,AAAAA,AAAAA;AAFH,AAAA,AAAAW,AAAAC,AAACC;;AAIH,AAAA,AAAMM,AACHC;AADH,AAEE,AAAM7B,AAAW6B;;AAEnB,AAAA,AAAMC,AAAOC;AAAb,AACE,AAAM,AAAgB/B;AAAtB,AACE,AAAMO,AAAY,AAAA,AAAKA;;AACvB,AAAM,AAAA,AAAc,AAAA,AAACyB,AAAIzB;AAAzB,AACE,AAAMF,AAAW,AAAA,AAAQ,AAAA,AAAM,AAAG0B,AAAS5B;;AAC3C,AAAMA,AAAc4B;;AACpB,AAACZ;;AAHH;;;AAFF","names":["goog/define","js/chia","js/chia.view","js/chia.view.fps","js/chia.view.fps.count-fps?","chia.view.fps/count-fps?","chia.view.fps/count-fps?*","js/chia.view.fps.last-fps-time","chia.view.fps/last-fps-time","js/chia.view.fps.frame-rate","chia.view.fps/frame-rate","js/chia.view.fps.frame-count","chia.view.fps/frame-count","js/chia.view.fps.fps-element","chia.view.fps/fps-element","cljs.core/memoize","obj65635","k65636","obj65638","applied-science.js-interop.impl/in?*","js/undefined","js/document","G__65639","js/document.createElement","chia.view.fps/render-fps","G__65640","G__65641","js/module$node_modules$react_dom$index.render","G__65642","G__65643","G__65644","js/module$node_modules$react$index.createElement","js/Math.floor","chia.view.fps/measure-frame-rate!","value","chia.view.fps/tick!","frame-ms","cljs.core/mod"],"sourcesContent":["(ns chia.view.fps\n  (:require [\"react\" :as react]\n            [\"react-dom\" :as react-dom]\n            [applied-science.js-interop :as j]))\n\n(goog-define count-fps?* false)                             ;; allows setting a default at compile time\n\n(defonce ^:private count-fps? count-fps?*)\n(defonce ^:private last-fps-time 1)\n(defonce frame-rate 0)\n(defonce frame-count 0)\n\n(defonce fps-element\n         (memoize (fn []\n                    (-> (j/get js/document :body)\n                        (.appendChild (doto (js/document.createElement \"div\")\n                                        (.setAttribute \"style\" \"padding: 3px 3px 0 0; font-size: 9px;\")\n                                        (.setAttribute \"class\" \"fixed top-0 right-0 z-max monospace gray\")))))))\n\n(defn render-fps []\n  (react-dom/render\n    (react/createElement \"div\" #js {} (str (js/Math.floor frame-rate)))\n    (fps-element)))\n\n(defn measure-frame-rate!\n  [value]\n  (set! count-fps? value))\n\n(defn tick! [frame-ms]\n  (when ^boolean (true? count-fps?)\n    (set! frame-count (inc frame-count))\n    (when (identical? 0 (mod frame-count 29))\n      (set! frame-rate (* 1000 (/ 30 (- frame-ms last-fps-time))))\n      (set! last-fps-time frame-ms)\n      (render-fps))))"]}