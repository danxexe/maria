{
"version":3,
"file":"goog.dom.multirange.js",
"lineCount":281,
"mappings":"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",
"sources":["goog/dom/multirange.js"],
"sourcesContent":["// Copyright 2008 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Utilities for working with W3C multi-part ranges.\n *\n * @author robbyw@google.com (Robby Walker)\n */\n\n\ngoog.provide('goog.dom.MultiRange');\ngoog.provide('goog.dom.MultiRangeIterator');\n\ngoog.require('goog.array');\ngoog.require('goog.dom');\ngoog.require('goog.dom.AbstractMultiRange');\ngoog.require('goog.dom.AbstractRange');\ngoog.require('goog.dom.RangeIterator');\ngoog.require('goog.dom.RangeType');\ngoog.require('goog.dom.SavedRange');\ngoog.require('goog.dom.TextRange');\ngoog.require('goog.iter');\ngoog.require('goog.iter.StopIteration');\ngoog.require('goog.log');\n\n\n\n/**\n * Creates a new multi part range with no properties.  Do not use this\n * constructor: use one of the goog.dom.Range.createFrom* methods instead.\n * @constructor\n * @extends {goog.dom.AbstractMultiRange}\n * @final\n */\ngoog.dom.MultiRange = function() {\n  /**\n   * Logging object.\n   * @private {goog.log.Logger}\n   */\n  this.logger_ = goog.log.getLogger('goog.dom.MultiRange');\n\n  /**\n   * Array of browser sub-ranges comprising this multi-range.\n   * @private {Array<Range>}\n   */\n  this.browserRanges_ = [];\n\n  /**\n   * Lazily initialized array of range objects comprising this multi-range.\n   * @private {Array<goog.dom.TextRange>}\n   */\n  this.ranges_ = [];\n\n  /**\n   * Lazily computed sorted version of ranges_, sorted by start point.\n   * @private {Array<?goog.dom.TextRange>?}\n   */\n  this.sortedRanges_ = null;\n\n  /**\n   * Lazily computed container node.\n   * @private {?Node}\n   */\n  this.container_ = null;\n};\ngoog.inherits(goog.dom.MultiRange, goog.dom.AbstractMultiRange);\n\n\n/**\n * Creates a new range wrapper from the given browser selection object.  Do not\n * use this method directly - please use goog.dom.Range.createFrom* instead.\n * @param {Selection} selection The browser selection object.\n * @return {!goog.dom.MultiRange} A range wrapper object.\n */\ngoog.dom.MultiRange.createFromBrowserSelection = function(selection) {\n  var range = new goog.dom.MultiRange();\n  for (var i = 0, len = selection.rangeCount; i < len; i++) {\n    range.browserRanges_.push(selection.getRangeAt(i));\n  }\n  return range;\n};\n\n\n/**\n * Creates a new range wrapper from the given browser ranges.  Do not\n * use this method directly - please use goog.dom.Range.createFrom* instead.\n * @param {Array<Range>} browserRanges The browser ranges.\n * @return {!goog.dom.MultiRange} A range wrapper object.\n */\ngoog.dom.MultiRange.createFromBrowserRanges = function(browserRanges) {\n  var range = new goog.dom.MultiRange();\n  range.browserRanges_ = goog.array.clone(browserRanges);\n  return range;\n};\n\n\n/**\n * Creates a new range wrapper from the given goog.dom.TextRange objects.  Do\n * not use this method directly - please use goog.dom.Range.createFrom* instead.\n * @param {Array<goog.dom.TextRange>} textRanges The text range objects.\n * @return {!goog.dom.MultiRange} A range wrapper object.\n */\ngoog.dom.MultiRange.createFromTextRanges = function(textRanges) {\n  var range = new goog.dom.MultiRange();\n  range.ranges_ = textRanges;\n  range.browserRanges_ = goog.array.map(\n      textRanges, function(range) { return range.getBrowserRangeObject(); });\n  return range;\n};\n\n\n// Method implementations\n\n\n/**\n * Clears cached values.  Should be called whenever this.browserRanges_ is\n * modified.\n * @private\n */\ngoog.dom.MultiRange.prototype.clearCachedValues_ = function() {\n  this.ranges_ = [];\n  this.sortedRanges_ = null;\n  this.container_ = null;\n};\n\n\n/**\n * @return {!goog.dom.MultiRange} A clone of this range.\n * @override\n */\ngoog.dom.MultiRange.prototype.clone = function() {\n  return goog.dom.MultiRange.createFromBrowserRanges(this.browserRanges_);\n};\n\n\n/** @override */\ngoog.dom.MultiRange.prototype.getType = function() {\n  return goog.dom.RangeType.MULTI;\n};\n\n\n/** @override */\ngoog.dom.MultiRange.prototype.getBrowserRangeObject = function() {\n  // NOTE(robbyw): This method does not make sense for multi-ranges.\n  if (this.browserRanges_.length > 1) {\n    goog.log.warning(\n        this.logger_,\n        'getBrowserRangeObject called on MultiRange with more than 1 range');\n  }\n  return this.browserRanges_[0];\n};\n\n\n/** @override */\ngoog.dom.MultiRange.prototype.setBrowserRangeObject = function(nativeRange) {\n  // TODO(robbyw): Look in to adding setBrowserSelectionObject.\n  return false;\n};\n\n\n/** @override */\ngoog.dom.MultiRange.prototype.getTextRangeCount = function() {\n  return this.browserRanges_.length;\n};\n\n\n/** @override */\ngoog.dom.MultiRange.prototype.getTextRange = function(i) {\n  if (!this.ranges_[i]) {\n    this.ranges_[i] =\n        goog.dom.TextRange.createFromBrowserRange(this.browserRanges_[i]);\n  }\n  return this.ranges_[i];\n};\n\n\n/** @override */\ngoog.dom.MultiRange.prototype.getContainer = function() {\n  if (!this.container_) {\n    var nodes = [];\n    for (var i = 0, len = this.getTextRangeCount(); i < len; i++) {\n      nodes.push(this.getTextRange(i).getContainer());\n    }\n    this.container_ = goog.dom.findCommonAncestor.apply(null, nodes);\n  }\n  return this.container_;\n};\n\n\n/**\n * @return {!Array<goog.dom.TextRange>} An array of sub-ranges, sorted by start\n *     point.\n */\ngoog.dom.MultiRange.prototype.getSortedRanges = function() {\n  if (!this.sortedRanges_) {\n    this.sortedRanges_ = this.getTextRanges();\n    this.sortedRanges_.sort(function(a, b) {\n      var aStartNode = a.getStartNode();\n      var aStartOffset = a.getStartOffset();\n      var bStartNode = b.getStartNode();\n      var bStartOffset = b.getStartOffset();\n\n      if (aStartNode == bStartNode && aStartOffset == bStartOffset) {\n        return 0;\n      }\n\n      /**\n       * @suppress {missingRequire} Cannot depend on goog.dom.Range because\n       *     it creates a circular dependency.\n       */\n      return goog.dom.Range.isReversed(\n                 aStartNode, aStartOffset, bStartNode, bStartOffset) ?\n          1 :\n          -1;\n    });\n  }\n  return this.sortedRanges_;\n};\n\n\n/** @override */\ngoog.dom.MultiRange.prototype.getStartNode = function() {\n  return this.getSortedRanges()[0].getStartNode();\n};\n\n\n/** @override */\ngoog.dom.MultiRange.prototype.getStartOffset = function() {\n  return this.getSortedRanges()[0].getStartOffset();\n};\n\n\n/** @override */\ngoog.dom.MultiRange.prototype.getEndNode = function() {\n  // NOTE(robbyw): This may return the wrong node if any subranges overlap.\n  return goog.array.peek(this.getSortedRanges()).getEndNode();\n};\n\n\n/** @override */\ngoog.dom.MultiRange.prototype.getEndOffset = function() {\n  // NOTE(robbyw): This may return the wrong value if any subranges overlap.\n  return goog.array.peek(this.getSortedRanges()).getEndOffset();\n};\n\n\n/** @override */\ngoog.dom.MultiRange.prototype.isRangeInDocument = function() {\n  return goog.array.every(this.getTextRanges(), function(range) {\n    return range.isRangeInDocument();\n  });\n};\n\n\n/** @override */\ngoog.dom.MultiRange.prototype.isCollapsed = function() {\n  return this.browserRanges_.length == 0 ||\n      this.browserRanges_.length == 1 && this.getTextRange(0).isCollapsed();\n};\n\n\n/** @override */\ngoog.dom.MultiRange.prototype.getText = function() {\n  return goog.array\n      .map(this.getTextRanges(), function(range) { return range.getText(); })\n      .join('');\n};\n\n\n/** @override */\ngoog.dom.MultiRange.prototype.getHtmlFragment = function() {\n  return this.getValidHtml();\n};\n\n\n/** @override */\ngoog.dom.MultiRange.prototype.getValidHtml = function() {\n  // NOTE(robbyw): This does not behave well if the sub-ranges overlap.\n  return goog.array\n      .map(\n          this.getTextRanges(),\n          function(range) { return range.getValidHtml(); })\n      .join('');\n};\n\n\n/** @override */\ngoog.dom.MultiRange.prototype.getPastableHtml = function() {\n  // TODO(robbyw): This should probably do something smart like group TR and TD\n  // selections in to the same table.\n  return this.getValidHtml();\n};\n\n\n/** @override */\ngoog.dom.MultiRange.prototype.__iterator__ = function(opt_keys) {\n  return new goog.dom.MultiRangeIterator(this);\n};\n\n\n// RANGE ACTIONS\n\n\n/** @override */\ngoog.dom.MultiRange.prototype.select = function() {\n  var selection =\n      goog.dom.AbstractRange.getBrowserSelectionForWindow(this.getWindow());\n  selection.removeAllRanges();\n  for (var i = 0, len = this.getTextRangeCount(); i < len; i++) {\n    selection.addRange(this.getTextRange(i).getBrowserRangeObject());\n  }\n};\n\n\n/** @override */\ngoog.dom.MultiRange.prototype.removeContents = function() {\n  goog.array.forEach(\n      this.getTextRanges(), function(range) { range.removeContents(); });\n};\n\n\n// SAVE/RESTORE\n\n\n/** @override */\ngoog.dom.MultiRange.prototype.saveUsingDom = function() {\n  return new goog.dom.DomSavedMultiRange_(this);\n};\n\n\n// RANGE MODIFICATION\n\n\n/**\n * Collapses this range to a single point, either the first or last point\n * depending on the parameter.  This will result in the number of ranges in this\n * multi range becoming 1.\n * @param {boolean} toAnchor Whether to collapse to the anchor.\n * @override\n */\ngoog.dom.MultiRange.prototype.collapse = function(toAnchor) {\n  if (!this.isCollapsed()) {\n    var range = toAnchor ? this.getTextRange(0) :\n                           this.getTextRange(this.getTextRangeCount() - 1);\n\n    this.clearCachedValues_();\n    range.collapse(toAnchor);\n    this.ranges_ = [range];\n    this.sortedRanges_ = [range];\n    this.browserRanges_ = [range.getBrowserRangeObject()];\n  }\n};\n\n\n// SAVED RANGE OBJECTS\n\n\n\n/**\n * A SavedRange implementation using DOM endpoints.\n * @param {goog.dom.MultiRange} range The range to save.\n * @constructor\n * @extends {goog.dom.SavedRange}\n * @private\n */\ngoog.dom.DomSavedMultiRange_ = function(range) {\n  /**\n   * Array of saved ranges.\n   * @type {Array<goog.dom.SavedRange>}\n   * @private\n   */\n  this.savedRanges_ = goog.array.map(\n      range.getTextRanges(), function(range) { return range.saveUsingDom(); });\n};\ngoog.inherits(goog.dom.DomSavedMultiRange_, goog.dom.SavedRange);\n\n\n/**\n * @return {!goog.dom.MultiRange} The restored range.\n * @override\n */\ngoog.dom.DomSavedMultiRange_.prototype.restoreInternal = function() {\n  var ranges = goog.array.map(\n      this.savedRanges_, function(savedRange) { return savedRange.restore(); });\n  return goog.dom.MultiRange.createFromTextRanges(ranges);\n};\n\n\n/** @override */\ngoog.dom.DomSavedMultiRange_.prototype.disposeInternal = function() {\n  goog.dom.DomSavedMultiRange_.superClass_.disposeInternal.call(this);\n\n  goog.array.forEach(\n      this.savedRanges_, function(savedRange) { savedRange.dispose(); });\n  delete this.savedRanges_;\n};\n\n\n// RANGE ITERATION\n\n\n\n/**\n * Subclass of goog.dom.TagIterator that iterates over a DOM range.  It\n * adds functions to determine the portion of each text node that is selected.\n *\n * @param {goog.dom.MultiRange} range The range to traverse.\n * @constructor\n * @extends {goog.dom.RangeIterator}\n * @final\n */\ngoog.dom.MultiRangeIterator = function(range) {\n  /**\n   * The list of range iterators left to traverse.\n   * @private {?Array<?goog.dom.RangeIterator>}\n   */\n  this.iterators_ = null;\n\n  /**\n   * The index of the current sub-iterator being traversed.\n   * @private {number}\n   */\n  this.currentIdx_ = 0;\n\n  if (range) {\n    this.iterators_ = goog.array.map(range.getSortedRanges(), function(r) {\n      return goog.iter.toIterator(r);\n    });\n  }\n\n  goog.dom.MultiRangeIterator.base(\n      this, 'constructor', range ? this.getStartNode() : null, false);\n};\ngoog.inherits(goog.dom.MultiRangeIterator, goog.dom.RangeIterator);\n\n\n/** @override */\ngoog.dom.MultiRangeIterator.prototype.getStartTextOffset = function() {\n  return this.iterators_[this.currentIdx_].getStartTextOffset();\n};\n\n\n/** @override */\ngoog.dom.MultiRangeIterator.prototype.getEndTextOffset = function() {\n  return this.iterators_[this.currentIdx_].getEndTextOffset();\n};\n\n\n/** @override */\ngoog.dom.MultiRangeIterator.prototype.getStartNode = function() {\n  return this.iterators_[0].getStartNode();\n};\n\n\n/** @override */\ngoog.dom.MultiRangeIterator.prototype.getEndNode = function() {\n  return goog.array.peek(this.iterators_).getEndNode();\n};\n\n\n/** @override */\ngoog.dom.MultiRangeIterator.prototype.isLast = function() {\n  return this.iterators_[this.currentIdx_].isLast();\n};\n\n\n/** @override */\ngoog.dom.MultiRangeIterator.prototype.next = function() {\n\n  try {\n    var it = this.iterators_[this.currentIdx_];\n    var next = it.next();\n    this.setPosition(it.node, it.tagType, it.depth);\n    return next;\n  } catch (ex) {\n    if (ex !== goog.iter.StopIteration ||\n        this.iterators_.length - 1 == this.currentIdx_) {\n      throw ex;\n    } else {\n      // In case we got a StopIteration, increment counter and try again.\n      this.currentIdx_++;\n      return this.next();\n    }\n  }\n};\n\n\n/** @override */\ngoog.dom.MultiRangeIterator.prototype.copyFrom = function(other) {\n  this.iterators_ = goog.array.clone(other.iterators_);\n  goog.dom.MultiRangeIterator.superClass_.copyFrom.call(this, other);\n};\n\n\n/**\n * @return {!goog.dom.MultiRangeIterator} An identical iterator.\n * @override\n */\ngoog.dom.MultiRangeIterator.prototype.clone = function() {\n  var copy = new goog.dom.MultiRangeIterator(null);\n  copy.copyFrom(this);\n  return copy;\n};\n"],
"names":["goog","provide","require","dom","MultiRange","goog.dom.MultiRange","logger_","log","getLogger","browserRanges_","ranges_","sortedRanges_","container_","inherits","AbstractMultiRange","createFromBrowserSelection","goog.dom.MultiRange.createFromBrowserSelection","selection","range","i","len","rangeCount","push","getRangeAt","createFromBrowserRanges","goog.dom.MultiRange.createFromBrowserRanges","browserRanges","array","clone","createFromTextRanges","goog.dom.MultiRange.createFromTextRanges","textRanges","map","getBrowserRangeObject","prototype","clearCachedValues_","goog.dom.MultiRange.prototype.clearCachedValues_","goog.dom.MultiRange.prototype.clone","getType","goog.dom.MultiRange.prototype.getType","RangeType","MULTI","goog.dom.MultiRange.prototype.getBrowserRangeObject","length","warning","setBrowserRangeObject","goog.dom.MultiRange.prototype.setBrowserRangeObject","nativeRange","getTextRangeCount","goog.dom.MultiRange.prototype.getTextRangeCount","getTextRange","goog.dom.MultiRange.prototype.getTextRange","TextRange","createFromBrowserRange","getContainer","goog.dom.MultiRange.prototype.getContainer","nodes","findCommonAncestor","apply","getSortedRanges","goog.dom.MultiRange.prototype.getSortedRanges","getTextRanges","sort","a","b","aStartNode","getStartNode","aStartOffset","getStartOffset","bStartNode","bStartOffset","Range","isReversed","goog.dom.MultiRange.prototype.getStartNode","goog.dom.MultiRange.prototype.getStartOffset","getEndNode","goog.dom.MultiRange.prototype.getEndNode","peek","getEndOffset","goog.dom.MultiRange.prototype.getEndOffset","isRangeInDocument","goog.dom.MultiRange.prototype.isRangeInDocument","every","isCollapsed","goog.dom.MultiRange.prototype.isCollapsed","getText","goog.dom.MultiRange.prototype.getText","join","getHtmlFragment","goog.dom.MultiRange.prototype.getHtmlFragment","getValidHtml","goog.dom.MultiRange.prototype.getValidHtml","getPastableHtml","goog.dom.MultiRange.prototype.getPastableHtml","__iterator__","goog.dom.MultiRange.prototype.__iterator__","opt_keys","MultiRangeIterator","select","goog.dom.MultiRange.prototype.select","AbstractRange","getBrowserSelectionForWindow","getWindow","removeAllRanges","addRange","removeContents","goog.dom.MultiRange.prototype.removeContents","forEach","saveUsingDom","goog.dom.MultiRange.prototype.saveUsingDom","DomSavedMultiRange_","collapse","goog.dom.MultiRange.prototype.collapse","toAnchor","goog.dom.DomSavedMultiRange_","savedRanges_","SavedRange","restoreInternal","goog.dom.DomSavedMultiRange_.prototype.restoreInternal","ranges","savedRange","restore","disposeInternal","goog.dom.DomSavedMultiRange_.prototype.disposeInternal","superClass_","call","dispose","goog.dom.MultiRangeIterator","iterators_","currentIdx_","r","iter","toIterator","base","RangeIterator","getStartTextOffset","goog.dom.MultiRangeIterator.prototype.getStartTextOffset","getEndTextOffset","goog.dom.MultiRangeIterator.prototype.getEndTextOffset","goog.dom.MultiRangeIterator.prototype.getStartNode","goog.dom.MultiRangeIterator.prototype.getEndNode","isLast","goog.dom.MultiRangeIterator.prototype.isLast","next","goog.dom.MultiRangeIterator.prototype.next","it","setPosition","node","tagType","depth","ex","StopIteration","copyFrom","goog.dom.MultiRangeIterator.prototype.copyFrom","other","goog.dom.MultiRangeIterator.prototype.clone","copy"]
}
