shadow$provide.module$node_modules$$braintripping$keypress_js$keypress=function(global,process,require,module,exports,shadow$shims){(function(){var hasProp={}.hasOwnProperty,indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++)if(i in this&&this[i]===item)return i;return-1};var _factory_defaults={is_unordered:!1,is_counting:!1,is_exclusive:!1,is_solitary:!1,prevent_default:!1,prevent_repeat:!1,normalize_caps_lock:!1};var _modifier_keys="meta alt option ctrl shift cmd".split(" ");var _metakey=
"ctrl";var normalize_combo=function(keys_or_combo){var alt_name,l,ref;"string"===typeof keys_or_combo&&(keys_or_combo=keys_or_combo.split(" "));if(Array.isArray(keys_or_combo)){var results=[];var i=l=0;for(ref=keys_or_combo.length;0<=ref?l<ref:l>ref;i=0<=ref?++l:--l){var key=keys_or_combo[i];(alt_name=_keycode_alternate_names[key])&&(key=keys_or_combo[i]=alt_name);"meta"===key&&keys_or_combo.splice(i,1,_metakey);"cmd"===key?results.push(_log_error('Warning: use the "meta" key rather than "cmd" for Windows compatibility')):
results.push(void 0)}return results}};var keypress={debug:!1};var Combo=function(){function Combo(dictionary){var property;for(property in dictionary)if(hasProp.call(dictionary,property)){var value=dictionary[property];!1!==value&&(this[property]=value)}this.keys=this.keys||[];this.count=this.count||0}Combo.prototype.allows_key_repeat=function(){return!this.prevent_repeat&&"function"===typeof this.on_keydown};Combo.prototype.reset=function(){this.count=0;return this.keyup_fired=null};return Combo}();
keypress.Listener=function(){function Listener(element,defaults){var property;"undefined"!==typeof jQuery&&null!==jQuery&&element instanceof jQuery&&(1!==element.length&&_log_error("Warning: your jQuery selector should have exactly one object."),element=element[0]);this.should_force_event_defaults=this.should_suppress_event_defaults=!1;this.sequence_delay=800;this._registered_combos=[];this._keys_down=[];this._active_combos=[];this._sequence=[];this._sequence_timer=null;this._prevent_capture=!1;this._defaults=
defaults||{};for(property in _factory_defaults)hasProp.call(_factory_defaults,property)&&(defaults=_factory_defaults[property],this._defaults[property]=this._defaults[property]||defaults);this.element=element||document.body;element=function(target,event,handler){goog.events.listen(target,event,function(e){return handler(e.getBrowserEvent())},!0);return handler};this.keydown_event=element(this.element,"keydown",function(_this){return function(e){var ref,ref1;e=e||window.event;var should_auto_keyup=
"cmd"===_metakey&&0<=indexOf.call(_this._keys_down,"cmd")&&"cmd"!==(ref=_convert_key_to_readable(null!=(ref1=e.keyCode)?ref1:e.key))&&"shift"!==ref&&"alt"!==ref&&"caps"!==ref&&"tab"!==ref;_this._receive_input(e,!0);if(should_auto_keyup)return _this._receive_input(e,!1)}}(this));this.keyup_event=element(this.element,"keyup",function(_this){return function(e){e=e||window.event;return _this._receive_input(e,!1)}}(this));this.blur_event=element(window,"blur",function(_this){return function(){var len;
var ref=_this._keys_down;var l=0;for(len=ref.length;l<len;l++){var key=ref[l];_this._key_up(key,{})}return _this._keys_down=[]}}(this))}Listener.prototype.destroy=function(){var remove_handler=function(target,event,handler){return goog.events.unlisten(target,event,function(e){return handler(e.getBrowserEvent())},!0)};remove_handler(this.element,"keydown",this.keydown_event);remove_handler(this.element,"keyup",this.keyup_event);return remove_handler(window,"blur",this.blur_event)};Listener.prototype._cmd_bug_check=
function(combo_keys){return"cmd"===_metakey&&0<=indexOf.call(this._keys_down,"cmd")&&0>indexOf.call(combo_keys,"cmd")&&1<combo_keys.length?!1:!0};Listener.prototype._prevent_default=function(e,should_prevent){if((should_prevent||this.should_suppress_event_defaults)&&!this.should_force_event_defaults&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation))return e.stopPropagation()};Listener.prototype._get_active_combos=function(key){var active_combos=[];var keys_down=_filter_array(this._keys_down,
function(down_key){return down_key!==key&&0<=indexOf.call(_modifier_keys,down_key)});keys_down.push(key);this._match_combo_arrays(keys_down,function(_this){return function(match){if(_this._cmd_bug_check(match.keys))return active_combos.push(match)}}(this));return active_combos};Listener.prototype._get_potential_combos=function(key){var len;var potentials=[];var ref=this._registered_combos;var l=0;for(len=ref.length;l<len;l++){var combo=ref[l];combo.is_sequence||0<=indexOf.call(combo.keys,key)&&this._cmd_bug_check(combo.keys)&&
potentials.push(combo)}return potentials};Listener.prototype._add_to_active_combos=function(combo){var active_combo,l,len,ref;var should_replace=!1;var should_prepend=!0;var already_replaced=!1;if(0<=indexOf.call(this._active_combos,combo))return!0;if(this._active_combos.length){var i=l=0;for(ref=this._active_combos.length;0<=ref?l<ref:l>ref;i=0<=ref?++l:--l)if((active_combo=this._active_combos[i])&&active_combo.is_exclusive&&combo.is_exclusive){active_combo=active_combo.keys;if(!should_replace){var m=
0;for(len=active_combo.length;m<len;m++){var active_key=active_combo[m];should_replace=!0;if(0>indexOf.call(combo.keys,active_key)){should_replace=!1;break}}}if(should_prepend&&!should_replace){var ref1=combo.keys;m=0;for(len=ref1.length;m<len;m++)if(active_key=ref1[m],should_prepend=!1,0>indexOf.call(active_combo,active_key)){should_prepend=!0;break}}should_replace&&(already_replaced?(active_combo=this._active_combos.splice(i,1)[0],null!=active_combo&&active_combo.reset()):(active_combo=this._active_combos.splice(i,
1,combo)[0],null!=active_combo&&active_combo.reset(),already_replaced=!0),should_prepend=!1)}}should_prepend&&this._active_combos.unshift(combo);return should_replace||should_prepend};Listener.prototype._remove_from_active_combos=function(combo){var l,ref;var i=l=0;for(ref=this._active_combos.length;0<=ref?l<ref:l>ref;i=0<=ref?++l:--l){var active_combo=this._active_combos[i];if(active_combo===combo){combo=this._active_combos.splice(i,1)[0];combo.reset();break}}};Listener.prototype._get_possible_sequences=
function(){var len,m,n,ref1,ref2;var matches=[];var ref=this._registered_combos;var l=0;for(len=ref.length;l<len;l++){var combo=ref[l];var i=m=1;for(ref1=this._sequence.length;1<=ref1?m<=ref1:m>=ref1;i=1<=ref1?++m:--m){var sequence=this._sequence.slice(-i);if(combo.is_sequence){if(0>indexOf.call(combo.keys,"shift")&&(sequence=_filter_array(sequence,function(key){return"shift"!==key}),!sequence.length))continue;i=n=0;for(ref2=sequence.length;0<=ref2?n<ref2:n>ref2;i=0<=ref2?++n:--n)if(combo.keys[i]===
sequence[i])var match=!0;else{match=!1;break}match&&matches.push(combo)}}}return matches};Listener.prototype._add_key_to_sequence=function(key,e){var len;this._sequence.push(key);var sequence_combos=this._get_possible_sequences();if(sequence_combos.length){var l=0;for(len=sequence_combos.length;l<len;l++)key=sequence_combos[l],this._prevent_default(e,key.prevent_default);this._sequence_timer&&clearTimeout(this._sequence_timer);-1<this.sequence_delay&&(this._sequence_timer=setTimeout(function(_this){return function(){return _this._sequence=
[]}}(this),this.sequence_delay))}else this._sequence=[]};Listener.prototype._get_sequence=function(key){var len,m,n,ref1,ref2;var ref=this._registered_combos;var l=0;for(len=ref.length;l<len;l++){var combo=ref[l];if(combo.is_sequence){var i=m=1;for(ref1=this._sequence.length;1<=ref1?m<=ref1:m>=ref1;i=1<=ref1?++m:--m){var sequence=_filter_array(this._sequence,function(seq_key){return 0<=indexOf.call(combo.keys,"shift")?!0:"shift"!==seq_key}).slice(-i);if(combo.keys.length===sequence.length)for(i=n=
0,ref2=sequence.length;0<=ref2?n<ref2:n>ref2;i=0<=ref2?++n:--n){var seq_key=sequence[i];if(!(0>indexOf.call(combo.keys,"shift")&&"shift"===seq_key||"shift"===key&&0>indexOf.call(combo.keys,"shift")))if(combo.keys[i]===seq_key)var match=!0;else{match=!1;break}}}if(match)return combo.is_exclusive&&(this._sequence=[]),combo}}return!1};Listener.prototype._receive_input=function(e,is_keydown){var ref;if(this._prevent_capture)this._keys_down.length&&(this._keys_down=[]);else{var key=_convert_key_to_readable(null!=
(ref=e.keyCode)?ref:e.key);if((is_keydown||this._keys_down.length||"alt"!==key&&key!==_metakey)&&key)return is_keydown?this._key_down(key,e):this._key_up(key,e)}};Listener.prototype._fire=function(event,combo,key_event,is_autorepeat){"function"===typeof combo["on_"+event]&&this._prevent_default(key_event,!0!==combo["on_"+event].call(combo["this"],key_event,combo.count,is_autorepeat));"release"===event&&(combo.count=0);if("keyup"===event)return combo.keyup_fired=!0};Listener.prototype._match_combo_arrays=
function(potential_match,match_handler){var len;var ref=this._registered_combos;var l=0;for(len=ref.length;l<len;l++){var source_combo=ref[l];var combo_potential_match=potential_match.slice(0);source_combo.normalize_caps_lock&&0<=indexOf.call(combo_potential_match,"caps")&&combo_potential_match.splice(combo_potential_match.indexOf("caps"),1);(!source_combo.is_unordered&&_compare_arrays_sorted(combo_potential_match,source_combo.keys)||source_combo.is_unordered&&_compare_arrays(combo_potential_match,
source_combo.keys))&&match_handler(source_combo)}};Listener.prototype._fuzzy_match_combo_arrays=function(potential_match,match_handler){var len;var ref=this._registered_combos;var l=0;for(len=ref.length;l<len;l++){var source_combo=ref[l];(!source_combo.is_unordered&&_is_array_in_array_sorted(source_combo.keys,potential_match)||source_combo.is_unordered&&_is_array_in_array(source_combo.keys,potential_match))&&match_handler(source_combo)}};Listener.prototype._keys_remain=function(combo){var len;var ref=
combo.keys;var l=0;for(len=ref.length;l<len;l++)if(combo=ref[l],0<=indexOf.call(this._keys_down,combo)){var keys_remain=!0;break}return keys_remain};Listener.prototype._key_down=function(key,e){var combos,len;for(mod in _modifier_event_mapping){var combo=_modifier_event_mapping[mod];e[combo]&&(mod===key||0<=indexOf.call(this._keys_down,mod)||this._keys_down.push(mod))}for(mod in _modifier_event_mapping)if(combo=_modifier_event_mapping[mod],mod!==key&&0<=indexOf.call(this._keys_down,mod)&&!e[combo]&&
("cmd"!==mod||"cmd"===_metakey))for(combo=combos=0,len=this._keys_down.length;0<=len?combos<len:combos>len;combo=0<=len?++combos:--combos)this._keys_down[combo]===mod&&this._keys_down.splice(combo,1);combos=this._get_active_combos(key);var mod=this._get_potential_combos(key);var m=0;for(len=combos.length;m<len;m++)combo=combos[m],this._handle_combo_down(combo,mod,key,e);if(mod.length)for(combos=0,combo=mod.length;combos<combo;combos++)len=mod[combos],this._prevent_default(e,len.prevent_default);0>
indexOf.call(this._keys_down,key)&&this._keys_down.push(key)};Listener.prototype._handle_combo_down=function(combo,potential_combos,key,e){var len;if(0>indexOf.call(combo.keys,key))return!1;this._prevent_default(e,combo&&combo.prevent_default);var is_autorepeat=!1;if(0<=indexOf.call(this._keys_down,key)&&(is_autorepeat=!0,!combo.allows_key_repeat()))return!1;var result=this._add_to_active_combos(combo,key);key=combo.keyup_fired=!1;if(combo.is_exclusive){var l=0;for(len=potential_combos.length;l<len;l++){var potential_combo=
potential_combos[l];if(potential_combo.is_exclusive&&potential_combo.keys.length>combo.keys.length){key=!0;break}}}if(!key&&(combo.is_counting&&"function"===typeof combo.on_keydown&&(combo.count+=1),result))return this._fire("keydown",combo,e,is_autorepeat)};Listener.prototype._key_up=function(key,e){var active_combo,active_combos_length,combos,len;(combos=this._get_sequence(key))&&this._fire("keyup",combos,e);if(0>indexOf.call(this._keys_down,key))return!1;combos=active_combo=0;for(active_combos_length=
this._keys_down.length;0<=active_combos_length?active_combo<active_combos_length:active_combo>active_combos_length;combos=0<=active_combos_length?++active_combo:--active_combo)if(this._keys_down[combos]===key){this._keys_down.splice(combos,1);break}active_combos_length=this._active_combos.length;combos=[];var ref1=this._active_combos;var m=0;for(len=ref1.length;m<len;m++)active_combo=ref1[m],0<=indexOf.call(active_combo.keys,key)&&combos.push(active_combo);m=0;for(len=combos.length;m<len;m++)active_combo=
combos[m],this._handle_combo_up(active_combo,e,key);if(1<active_combos_length)for(active_combos_length=this._active_combos,e=0,key=active_combos_length.length;e<key;e++)active_combo=active_combos_length[e],void 0===active_combo||0<=indexOf.call(combos,active_combo)||this._keys_remain(active_combo)||this._remove_from_active_combos(active_combo)};Listener.prototype._handle_combo_up=function(combo,e,key){this._prevent_default(e,combo&&combo.prevent_default);var keys_remaining=this._keys_remain(combo);
if(!combo.keyup_fired){var keys_down=this._keys_down.slice();keys_down.push(key);if(!combo.is_solitary||_compare_arrays(keys_down,combo.keys))this._fire("keyup",combo,e),combo.is_counting&&"function"===typeof combo.on_keyup&&"function"!==typeof combo.on_keydown&&(combo.count+=1)}keys_remaining||(this._fire("release",combo,e),this._remove_from_active_combos(combo))};Listener.prototype.simple_combo=function(keys,callback){return this.register_combo({keys:keys,on_keydown:callback})};Listener.prototype.counting_combo=
function(keys,count_callback){return this.register_combo({keys:keys,is_counting:!0,is_unordered:!1,on_keydown:count_callback})};Listener.prototype.sequence_combo=function(keys,callback){return this.register_combo({keys:keys,on_keydown:callback,is_sequence:!0,is_exclusive:!0})};Listener.prototype.register_combo=function(combo_dictionary){var property;"string"===typeof combo_dictionary.keys&&(combo_dictionary.keys=combo_dictionary.keys.split(" "));var ref=this._defaults;for(property in ref)if(hasProp.call(ref,
property)){var value=ref[property];void 0===combo_dictionary[property]&&(combo_dictionary[property]=value)}combo_dictionary=new Combo(combo_dictionary);if(_validate_combo(combo_dictionary))return this._registered_combos.push(combo_dictionary),combo_dictionary};Listener.prototype.register_many=function(combo_array){var len;var results=[];var l=0;for(len=combo_array.length;l<len;l++){var combo=combo_array[l];results.push(this.register_combo(combo))}return results};Listener.prototype.unregister_combo=
function(keys_or_combo){var len;if(!keys_or_combo)return!1;normalize_combo(keys_or_combo);var unregister_combo=function(_this){return function(combo){var l,ref;var results=[];var i=l=0;for(ref=_this._registered_combos.length;0<=ref?l<ref:l>ref;i=0<=ref?++l:--l)if(combo===_this._registered_combos[i]){_this._registered_combos.splice(i,1);break}else results.push(void 0);return results}}(this);if(keys_or_combo instanceof Combo)return unregister_combo(keys_or_combo);var ref$jscomp$0=this._registered_combos;
var results$jscomp$0=[];var l$jscomp$0=0;for(len=ref$jscomp$0.length;l$jscomp$0<len;l$jscomp$0++){var combo$jscomp$0=ref$jscomp$0[l$jscomp$0];null!=combo$jscomp$0&&(combo$jscomp$0.is_unordered&&_compare_arrays(keys_or_combo,combo$jscomp$0.keys)||!combo$jscomp$0.is_unordered&&_compare_arrays_sorted(keys_or_combo,combo$jscomp$0.keys)?results$jscomp$0.push(unregister_combo(combo$jscomp$0)):results$jscomp$0.push(void 0))}return results$jscomp$0};Listener.prototype.unregister_many=function(combo_array){var len;
var results=[];var l=0;for(len=combo_array.length;l<len;l++){var combo=combo_array[l];results.push(this.unregister_combo(combo))}return results};Listener.prototype.get_registered_combos=function(){return this._registered_combos};Listener.prototype.reset=function(){return this._registered_combos=[]};Listener.prototype.listen=function(){return this._prevent_capture=!1};Listener.prototype.stop_listening=function(){return this._prevent_capture=!0};Listener.prototype.get_meta_key=function(){return _metakey};
return Listener}();var _convert_key_to_readable=function(k){return _keycode_dictionary[k]};var _filter_array=function(array,callback){if(array.filter)return array.filter(callback);var len;var results=[];var l=0;for(len=array.length;l<len;l++){var element=array[l];callback(element)&&results.push(element)}return results};var _compare_arrays=function(a1,a2){var len;if(a1.length!==a2.length)return!1;var l=0;for(len=a1.length;l<len;l++){var item=a1[l];if(!(0<=indexOf.call(a2,item)))return!1}return!0};
var _compare_arrays_sorted=function(a1,a2){var l,ref;if(a1.length!==a2.length)return!1;var i=l=0;for(ref=a1.length;0<=ref?l<ref:l>ref;i=0<=ref?++l:--l)if(a1[i]!==a2[i])return!1;return!0};var _is_array_in_array=function(a1,a2){var len;var l=0;for(len=a1.length;l<len;l++){var item=a1[l];if(0>indexOf.call(a2,item))return!1}return!0};var _index_of_in_array=Array.prototype.indexOf||function(a,item){var l,ref;var i=l=0;for(ref=a.length;0<=ref?l<=ref:l>=ref;i=0<=ref?++l:--l)if(a[i]===item)return i;return-1};
var _is_array_in_array_sorted=function(a1,a2){var len,prev;var l=prev=0;for(len=a1.length;l<len;l++){var index=a1[l];index=_index_of_in_array.call(a2,index);if(index>=prev)prev=index;else return!1}return!0};var _log_error=function(){if(keypress.debug)return console.log.apply(console,arguments)};var _key_is_valid=function(key){var _;var valid=!1;for(_ in _keycode_dictionary){var valid_key=_keycode_dictionary[_];if(key===valid_key){valid=!0;break}}return valid};var _validate_combo=function(combo){var i,
len,property;var validated=!0;combo.keys.length||_log_error("You're trying to bind a combo with no keys:",combo);normalize_combo(combo.keys);var non_modifier_keys=combo.keys;var l=0;for(len=non_modifier_keys.length;l<len;l++){var key=non_modifier_keys[l];_key_is_valid(key)||(_log_error('Do not recognize the key "'+key+'"'),validated=!1)}if(0<=indexOf.call(combo.keys,"meta")||0<=indexOf.call(combo.keys,"cmd")){non_modifier_keys=combo.keys.slice();l=0;for(key=_modifier_keys.length;l<key;l++)len=_modifier_keys[l],
-1<(i=_index_of_in_array.call(non_modifier_keys,len))&&non_modifier_keys.splice(i,1);1<non_modifier_keys.length&&(_log_error("META and CMD key combos cannot have more than 1 non-modifier keys",combo,non_modifier_keys),validated=!1)}for(property in combo)"undefined"===_factory_defaults[property]&&_log_error("The property "+property+" is not a valid combo property. Your combo has still been registered.");return validated};var _modifier_event_mapping={cmd:"metaKey",ctrl:"ctrlKey",shift:"shiftKey",alt:"altKey"};
var _keycode_alternate_names={escape:"esc",control:"ctrl",command:"cmd","break":"pause",windows:"cmd",option:"alt",caps_lock:"caps",apostrophe:"'",semicolon:";",tilde:"~",accent:"`",scroll_lock:"scroll",num_lock:"num"};var _keycode_dictionary={0:"\\",8:"backspace",9:"tab",12:"num",13:"enter",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"caps",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",44:"print",45:"insert",46:"delete",48:"0",49:"1",50:"2",
51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",91:"cmd",92:"cmd",93:"cmd",96:"num_0",97:"num_1",98:"num_2",99:"num_3",100:"num_4",101:"num_5",102:"num_6",103:"num_7",104:"num_8",105:"num_9",106:"num_multiply",107:"num_add",108:"num_enter",109:"num_subtract",110:"num_decimal",111:"num_divide",112:"f1",113:"f2",114:"f3",
115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",124:"print",144:"num",145:"scroll",186:";",187:"\x3d",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",223:"`",224:"cmd",225:"alt",57392:"ctrl",63289:"num",59:";",61:"\x3d",173:"-"};keypress._keycode_dictionary=_keycode_dictionary;keypress._is_array_in_array_sorted=_is_array_in_array_sorted;-1!==navigator.userAgent.indexOf("Mac OS X")&&(_metakey="cmd");-1!==navigator.userAgent.indexOf("Opera")&&
(_keycode_dictionary["17"]="cmd");"function"===typeof define&&define.amd?define([],function(){return keypress}):"undefined"!==typeof exports&&null!==exports?exports.keypress=keypress:window.keypress=keypress}).call(this)}
goog.provide("module$node_modules$$braintripping$keypress_js$keypress");
goog.global. module$node_modules$$braintripping$keypress_js$keypress=shadow.js.require("module$node_modules$$braintripping$keypress_js$keypress", {});

//# sourceMappingURL=module$node_modules$$braintripping$keypress_js$keypress.js.map
